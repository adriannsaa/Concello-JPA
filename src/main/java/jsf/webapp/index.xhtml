<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core">
<ui:composition template="template/common/defaultLayout.xhtml">

	<ui:param name="logged" value="false" />
	<ui:define name="content">

		<ui:include src="/eventDetails.xhtml" />
		<ui:include src="/modifyEvent.xhtml" />

		<div id="content">
			<b:carousel>
				<b:carouselItem>
					<img
						src="https://unsplash.imgix.net/photo-1418479631014-8cbf89db3431?w=1024&amp;q=50&amp;fm=jpg&amp;s=478a9a2196033db7c0bf3c8ba3707f4d"
						id="carousel" />
				</b:carouselItem>
			</b:carousel>
			<b:container>
				<b:row id="fiveEvents">
					<div class="col-md-1"></div>
					<ui:repeat value="#{indexPageBean.fiveEvents}" var="event"
						varStatus="estado">
						<b:column class="col-md-2 col-xs-6 padding">
							<span
								class="icon-#{event.category} text-center col-md-12 col-xs-12 iconCategory"></span>
							<h2>
								<h:outputText value="#{event.title}" />
							</h2>
							<p>
								<h:outputText value="#{event.description}" />
								<br />
								<h:outputText value="#{event.eventDate}" />
								<br />
								<h:outputText value="#{event.location}" />
								<br /> <br />
								<h:outputText
									value="#{msg['indexParticipants']} #{event.participants}" />
								<b:column>
									<h:form>
										<b:commandButton look="success" class="singup" type="submit"
											value="#{msg['indexJoin']}"
											rendered="#{loginBean.logged and !userPageBean.userAssistEvent(event)}"
											action="#{userPageBean.assistEvent(event)}" />
									</h:form>
								</b:column>
								<b:column>
									<h:form>
										<b:commandButton look="danger" class="singup" type="submit"
											value="#{msg['indexGoOut']}"
											rendered="#{userPageBean.userAssistEvent(event)}"
											action="#{userPageBean.goOutEvent(event)}" />
									</h:form>
								</b:column>
								<b:column style="margin-top: 5px">
									<h:form>
										<b:commandButton look="primary" class="singup"
											value="#{msg['indexDetails']}" update="detailModal"
											ajax="true"
											actionListener="#{eventDetailsBean.getDetailsEvent(event.id)}"
											oncomplete="$('.modalPseudoClass').modal();return false;" />
									</h:form>
								</b:column>
								<b:column>
								<h:form style="margin-top: 5px">
									<b:commandButton look="primary" class="signupuser"
										value="#{msg['buttonModify']}" update="modifyModal"
										ajax="true"
										rendered="#{loginBean.logged and userPageBean.userCreateEvent(event) and userPageBean.dateBigger(event.eventDate)}"
										actionListener="#{eventPageBean.getDetailsEvent(event.id)}"
										oncomplete="$('.modalModifyEvent').modal();return false;" >
										<f:ajax execute="@form" render="@form :modifyModal :formModifyEvent" />
									</b:commandButton>
								</h:form>
								</b:column>
							</p>
						</b:column>
					</ui:repeat>
				</b:row>
				<ui:repeat value="#{indexPageBean.popularEvents}" var="event"
					varStatus="estado">
					<b:row class="listEvents">
						<b:column
							class="col-md-2 col-md-offset-3 col-xs-4 col-xs-offset-1 text-center">
							<span
								class="icon-#{event.category} text-center col-md-12 col-xs-12 iconCategory"></span>
						</b:column>
						<b:column class="col-md-4 col-xs-6">
							<h2>
								<h:outputText value="#{event.title}" />
							</h2>
							<p>
								<h:outputText value="#{event.description}" />
								<br />
								<h:outputText value="#{event.eventDate}" />
								<br />
								<h:outputText value="#{event.location}" />
								<br /> <br />
								<h:outputText
									value="#{msg['indexParticipants']} #{event.participants}" />
								<h:form>
									<b:commandButton look="success" class="singup" type="submit"
										value="#{msg['indexJoin']}"
										rendered="#{loginBean.logged and !userPageBean.userAssistEvent(event)}"
										action="#{userPageBean.assistEvent(event)}" />
								</h:form>
								<h:form>
									<b:commandButton look="danger" class="singup" type="submit"
										value="#{msg['indexGoOut']}"
										rendered="#{userPageBean.userAssistEvent(event)}"
										action="#{userPageBean.goOutEvent(event)}" />
								</h:form>
								<h:form style="margin-top: 5px">
									<b:commandButton look="primary" class="singup"
										value="#{msg['indexDetails']}" update="detailModal"
										ajax="true"
										actionListener="#{eventDetailsBean.getDetailsEvent(event.id)}"
										oncomplete="$('.modalPseudoClass').modal();return false;" />
								</h:form>
								<h:form style="margin-top: 5px">
									<b:commandButton look="primary" class="singup"
										value="#{msg['buttonModify']}" update="modifyModal"
										ajax="true"
										rendered="#{loginBean.logged and userPageBean.userCreateEvent(event) and userPageBean.dateBigger(event.eventDate)}"
										actionListener="#{eventPageBean.getDetailsEvent(event.id)}"
										oncomplete="$('.modalModifyEvent').modal();return false;" >
										<f:ajax execute="@form" render="@form :modifyModal :formModifyEvent" />
									</b:commandButton>
								</h:form>
							</p>
						</b:column>
					</b:row>
				</ui:repeat>
			</b:container>
		</div>
	</ui:define>
</ui:composition>
</html>