<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core">
<ui:composition template="template/common/defaultLayout.xhtml">
	<ui:define name="content">
		<div id="content">
			<b:container>
				<b:row style="padding:25px">
					<b:column class="col-xs-12 col-md-8 col-md-offset-2">
						<h:form role="search">
							<b:panelGrid colSpans="10,2" size="xs">
								<b:inputText id="search"
									placeholder="#{msg['searchFormButtonPlaceholder']}"
									value="#{searchPageBean.textSearch}"></b:inputText>
								<h:message for="search" />
								<b:commandButton type="submit"
									value="#{msg['searchFormButton']}" class="btn btn-default"
									action="#{searchPageBean.doSearch()}"></b:commandButton>
							</b:panelGrid>
						</h:form>
					</b:column>
				</b:row>
			</b:container>

			<b:container>
				<ui:repeat value="#{searchPageBean.matchedAlumnoList}" var="alumno"
					varStatus="estado">
					<b:row class="listEvents">
						<b:column
							class="col-md-2 col-md-offset-3 col-xs-4 col-xs-offset-1 text-center">
							<span></span>
						</b:column>
						<b:column class="col-md-4 col-xs-6">
							<h2>
								<h:outputText value="#{alumno.nombre}" />
							</h2>
							<p>
								<h:outputText value="#{alumno.dni}" />
								<br />
								<h:outputText value="#{alumno.email}" />
								<br />
								<h:outputText value="#{alumno.telefono}" />
								<br /> <br />
								<h:form>
									<b:commandButton look="success" class="singup" type="submit"
										value="#{msg['indexJoin']}"
										rendered="#{loginBean.logged and !userPageBean.userAssistEvent(event)}" 
										action="#{userPageBean.assistEvent(event)}" />
								</h:form>
								<h:form>
									<b:commandButton look="danger" class="singup" type="submit"
										value="#{msg['indexGoOut']}"
										rendered="#{userPageBean.userAssistEvent(event)}"
										action="#{userPageBean.goOutEvent(event)}" />
								</h:form>
								<h:form style="margin-top: 5px">
									<b:commandButton look="primary" class="singup"
										value="#{msg['indexDetails']}" update="detailModal"
										ajax="true"
										actionListener="#{eventDetailsBean.getDetailsEvent(event.id)}"
										oncomplete="$('.modalPseudoClass').modal();return false;" />
								</h:form>
								<h:form style="margin-top: 5px">
									<b:commandButton look="primary" class="singup"
										value="#{msg['buttonModify']}" update="modifyModal"
										ajax="true"
										rendered="#{loginBean.logged and userPageBean.userCreateEvent(event) and userPageBean.dateBigger(event.eventDate)}"
										actionListener="#{eventPageBean.getDetailsEvent(event.id)}"
										oncomplete="$('.modalModifyEvent').modal();return false;" >
										<f:ajax execute="@form" render="@form :modifyModal :formModifyEvent" />
									</b:commandButton>
								</h:form>

							</p>
						</b:column>
					</b:row>
				</ui:repeat>
			</b:container>
		</div>
	</ui:define>
</ui:composition>
</html>